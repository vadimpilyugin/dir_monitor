### Компиляция и запуск
```bash
make deps
make all
./monitor
```
Параметры программе передаются в командной строке либо через файл config.ini.
Приоритет у командной строки.

### Тестирование
Для тестирования использовался вспомогательный скрипт create.py. Директория
для мониторинга обозначается как DIRECTORY.
```bash
python3 create.py DIRECTORY
```
В другом окне:
```bash
./monitor -dir=DIRECTORY -url=ADDRESS
```
По данному адресу был запущен HTTP-сервер.
Программа мониторинга успешно отработала и была устойчива к потере соединения 
и перезапуску.

### Работа программы
При старте программа открывает с флагом O_CREAT файл sent_list.txt в указанной директории. 
Этот файл содержит имена файлов, которые уже были успешно отправлены. 
Все неотправленные файлы ставятся в очередь.

Далее, через интерфейс inotify с помощью библиотеки fsnotify отслеживаются
события IN_MODIFY, IN_CREATE и IN_CLOSE_WRITE. Последовательности MODIFY-CLOSE и CREATE-CLOSE программа воспринимает как готовый к отправлению файл и ставит его в очередь.

Если отправка файла была неуспешной, то файл возвращается в очередь через
одну секунду, иначе его имя заносится в файл sent_list.txt (и удаляется, если выставлена такая опция).

### Возможные проблемы
- Программа не отслеживает даты модификации, поэтому возможна ситуация, когда файлы были перезаписаны и загрузка была неуспешной, но при этом имена этих файлов уже есть в sent_list.txt. В этом случае загрузка последней версии файлов не будет выполнена
- Программа не отслеживает ситуацию перемещения файла из другой директории
- Программа не проверяет права доступа к файлам, т.о. файл может попасть
  в очередь навсегда
- Не отслеживается случай удаления sent_list.txt во время работы программы.
